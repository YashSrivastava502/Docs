from playwright.sync_api import sync_playwright
import os
import time

def process_alert(...):  # your parameters
    base_url = "https://portal.azure.com/#@fareportal.com"
    full_url = f"{base_url}/resource{alert.get('targetResource')}"

    chrome_path = "C:/Program Files/Google/Chrome/Application/chrome.exe"
    user_data_dir = "C:/Users/Yash/AppData/Local/Google/Chrome/User Data"  # Adjust this to your path

    with sync_playwright() as p:
        browser = p.chromium.launch_persistent_context(
            user_data_dir=user_data_dir,
            executable_path=chrome_path,
            headless=False,
            args=["--remote-debugging-port=9222"]
        )

        page = browser.new_page()

        try:
            print("Opening:", full_url)
            page.goto(full_url, timeout=60000)

            # Now you're signed in, continue with your logic
            # e.g., check for "failures", take screenshot, etc.

        except Exception as e:
            print("Error:", e)
        finally:
            browser.close()



Install-ADDSDomainController `
  -DomainName "fptest.com.local" `
  -Credential (Get-Credential) `
  -InstallDns `
  -NoGlobalCatalog:$false `
  -SiteName "Default-First-Site-Name" `
  -DatabasePath "C:\Windows\NTDS" `
  -LogPath "C:\Windows\NTDS" `
  -SysvolPath "C:\Windows\SYSVOL" `
  -Force:$true
