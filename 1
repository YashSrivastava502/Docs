Perfect üëç since this is a fresh VM and the 400 GB disk is new (no data yet), we can directly partition, format, and mount it at /var/lib/clickhouse.

Here‚Äôs your clean setup:


---

üîπ Mount 400 GB Disk for ClickHouse

1Ô∏è‚É£ Find the new disk

lsblk -o NAME,SIZE,FSTYPE,MOUNTPOINT

Look for the ~400 GB disk (e.g. /dev/sdc).
Assume it‚Äôs /dev/sdc in this example.


---

2Ô∏è‚É£ Partition the disk

sudo parted /dev/sdc --script mklabel gpt
sudo parted /dev/sdc --script mkpart primary ext4 0% 100%


---

3Ô∏è‚É£ Format the partition

sudo mkfs.ext4 /dev/sdc1


---

4Ô∏è‚É£ Create the ClickHouse data directory

sudo mkdir -p /var/lib/clickhouse


---

5Ô∏è‚É£ Mount the new disk

sudo mount /dev/sdc1 /var/lib/clickhouse


---

6Ô∏è‚É£ Persist after reboot

Get UUID:

sudo blkid /dev/sdc1

Output example:

/dev/sdc1: UUID="abcd-1234-efgh-5678" TYPE="ext4"

Edit /etc/fstab:

sudo nano /etc/fstab

Add:

UUID=abcd-1234-efgh-5678   /var/lib/clickhouse   ext4   defaults   0   2


---

7Ô∏è‚É£ Verify

df -hT /var/lib/clickhouse

Should show something like:

/dev/sdc1   ext4   393G   24M   373G   1%   /var/lib/clickhouse


---

‚úÖ Done ‚Äî your 400 GB external disk is now mounted at /var/lib/clickhouse and will persist after reboots.

Do you want me to also prepare a one-shot script you can just run to do all this automatically?

