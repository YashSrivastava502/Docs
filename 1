cpu_data = []
for sh in server_hardware:
    try:
        server = oneview_client.server_hardware.get_by_uri(sh['uri'])
        util = server.get_utilization(filter='name:CpuUtilization')
        avg_cpu = 0
        if util and util.get('metricList'):
            avg_cpu = util['metricList'][0].get('average', 0)
        cpu_data.append({"Name": sh.get("name"), "CPU Utilization (%)": avg_cpu})
    except Exception:
        cpu_data.append({"Name": sh.get("name"), "CPU Utilization (%)": "N/A"})
